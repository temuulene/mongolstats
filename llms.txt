# mongolstats

**mongolstats** is your gateway to the [National Statistics Office of
Mongolia (NSO)](https://data.1212.mn/). Access official data, analyze
economic trends, and map regional statistics—all from within R.

## Why mongolstats?

- **Instant Access:** Query thousands of official datasets directly from
  18. 
- **Tidy Data:** Analysis-ready `tibble` format compatible with `dplyr`
  and `ggplot2`.
- **Mapping Ready:** Built-in administrative boundaries for effortless
  geospatial analysis.
- **Reliable:** Smart caching and robust error handling for smooth
  workflows.

## Installation

You can install mongolstats from CRAN with:

``` r
install.packages("mongolstats")
```

Or install the development version from [GitHub](https://github.com/)
with:

``` r
# install.packages("devtools")
devtools::install_github("temuulene/mongolstats")
```

## Quick Start

### 1. The Economic Pulse: GDP Trends

Visualize Mongolia’s economic growth in seconds.

``` r
library(mongolstats)
library(dplyr)
library(ggplot2)

# Set language to English
nso_options(mongolstats.lang = "en")

# Fetch GDP data - using labels for clarity
gdp <- nso_data(
  tbl_id = "DT_NSO_0500_001V1",
  selections = list(
    "Indicator" = "GDP, at current prices",
    "Economic activity" = "Total",
    "Year" = c(
      "2010", "2011", "2012", "2013", "2014",
      "2015", "2016", "2017", "2018", "2019",
      "2020", "2021", "2022", "2023", "2024"
    )
  ),
  labels = "en" # Get English labels
)

# Visualize the GDP trend as a static plot
p <- gdp |>
  ggplot(aes(x = as.integer(Year_en), y = value / 1e6, group = 1)) +
  geom_area(fill = "#42b883", alpha = 0.6) +  # shaded area emphasizes cumulative growth
  geom_line(color = "#2c3e50", linewidth = 1.2) +
  geom_point(color = "#2c3e50", size = 3, shape = 21, fill = "white", stroke = 1.5) +
  scale_y_continuous(labels = scales::label_number(suffix = "T")) +  # "T" suffix for trillions
  scale_x_continuous(breaks = function(x) seq(ceiling(min(x)), floor(max(x)), by = 1)) +
  labs(
    title = "Mongolia's GDP Growth (2010-2024)",
    subtitle = "Gross Domestic Product (in Trillions MNT)",
    x = NULL,
    y = "GDP (Trillions MNT)",
    caption = "Source: NSO Mongolia via mongolstats"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", size = 16),
    plot.subtitle = element_text(color = "grey40"),
    panel.grid.minor = element_blank(),
    panel.grid.major.x = element_blank()  # vertical gridlines removed for cleaner look
  )

p  # print static ggplot
```

![](reference/figures/README-gdp-example-1.png)

### 2. Mapping Regional Population

Discover how population is distributed across the country.

``` r
library(sf)

# 1. Fetch Population by Aimag
# Get all region codes first
regions <- nso_dim_values("DT_NSO_0300_002V1", "Region")$code

pop <- nso_data(
  tbl_id = "DT_NSO_0300_002V1",
  selections = list(
    "Region" = regions,
    "Year" = "2024" # Use the year label
  ),
  labels = "en" # Get English labels for joining
) |>
  filter(!Region %in% c("0", "1", "2", "3", "4", "511")) |> # Exclude Total, Regions, and duplicate UB
  mutate(
    Region_en = trimws(Region_en),
    Region_en = dplyr::case_match(
      Region_en,
      "Bayan-Ulgii" ~ "Bayan-Ölgii",
      "Uvurkhangai" ~ "Övörkhangai",
      "Khuvsgul" ~ "Hovsgel",
      "Umnugovi" ~ "Ömnögovi",
      "Tuv" ~ "Töv",
      "Sukhbaatar" ~ "Sükhbaatar",
      .default = Region_en
    )
  )

# 2. Get Administrative Boundaries
map <- mn_boundaries(level = "ADM1")

# 3. Join and Map
pop_map <- map |>
  left_join(pop, by = c("shapeName" = "Region_en"))

p <- ggplot(pop_map) +
  geom_sf(aes(fill = value), color = "white", size = 0.2) +
  # Log scale because population spans 3 orders of magnitude (20k to 1.5M)
  scale_fill_viridis_c(
    option = "magma",
    direction = -1,
    trans = "log10",
    breaks = c(20000, 50000, 100000, 500000, 1500000),
    labels = scales::label_number(scale_cut = scales::cut_short_scale()),
    name = "Population\n(Log Scale)"
  ) +
  labs(
    title = "Population Distribution (2024)",
    subtitle = "Mid-year resident population by Aimag (Log Scale)",
    caption = "Source: NSO Mongolia"
  ) +
  theme_void() +
  theme(
    plot.title = element_text(face = "bold", size = 16),
    plot.subtitle = element_text(color = "grey40"),
    legend.position = "bottom",
    legend.key.width = unit(1.5, "cm")
  )

p  # print static ggplot
```

![](reference/figures/README-pop-map-example-1.png)

## Documentation

Full documentation is available at
[temuulene.github.io/mongolstats](https://temuulene.github.io/mongolstats/).

- [Getting
  Started](https://temuulene.github.io/mongolstats/articles/getting-started.html) -
  Your first epidemiological analysis
- [Discovery
  Guide](https://temuulene.github.io/mongolstats/articles/discovery.html) -
  Find and explore tables
- [Mapping
  Guide](https://temuulene.github.io/mongolstats/articles/mapping.html) -
  Work with administrative boundaries

## Contributing

We welcome contributions! Please see the [Contributing
Guidelines](https://github.com/temuulene/mongolstats/blob/main/CONTRIBUTING.md)
for details.

## License

MIT

# Package index

## Discover Tables

- [`nso_itms()`](https://temuulene.github.io/mongolstats/reference/nso_itms.md)
  [`nso_tables()`](https://temuulene.github.io/mongolstats/reference/nso_itms.md)
  : List available NSO tables (PXWeb)
- [`nso_itms_detail()`](https://temuulene.github.io/mongolstats/reference/nso_itms_detail.md)
  [`nso_variables()`](https://temuulene.github.io/mongolstats/reference/nso_itms_detail.md)
  : Get variable codes for a table (PXWeb)
- [`nso_table_meta()`](https://temuulene.github.io/mongolstats/reference/nso_table_meta.md)
  : Table metadata as per-dimension codebooks
- [`nso_dims()`](https://temuulene.github.io/mongolstats/reference/nso_dims.md)
  : List dimensions for a PXWeb table
- [`nso_dim_values()`](https://temuulene.github.io/mongolstats/reference/nso_dim_values.md)
  : List values for a table dimension
- [`nso_itms_search()`](https://temuulene.github.io/mongolstats/reference/nso_itms_search.md)
  : Search tables by keyword (PXWeb)
- [`nso_itms_by_sector()`](https://temuulene.github.io/mongolstats/reference/nso_itms_by_sector.md)
  : List tables under a sector or sub-sector (PXWeb path)
- [`nso_sectors()`](https://temuulene.github.io/mongolstats/reference/nso_sectors.md)
  : List top-level categories (PXWeb NSO root)
- [`nso_subsectors()`](https://temuulene.github.io/mongolstats/reference/nso_subsectors.md)
  : List children for a given path (PXWeb)

## Fetch Data

- [`nso_data()`](https://temuulene.github.io/mongolstats/reference/nso_data.md)
  : Fetch statistical data for a table (PXWeb)
- [`nso_package()`](https://temuulene.github.io/mongolstats/reference/nso_package.md)
  : Fetch multiple tables and bind (PXWeb)
- [`nso_search()`](https://temuulene.github.io/mongolstats/reference/nso_search.md)
  : Search NSO tables
- [`nso_query()`](https://temuulene.github.io/mongolstats/reference/nso_query.md)
  : Create a PXWeb query object
- [`as_px_query()`](https://temuulene.github.io/mongolstats/reference/as_px_query.md)
  : Convert a query to a PXWeb body
- [`nso_fetch()`](https://temuulene.github.io/mongolstats/reference/nso_fetch.md)
  : Fetch a query and return a tibble

## Boundaries and Joins

- [`mn_boundaries()`](https://temuulene.github.io/mongolstats/reference/mn_boundaries.md)
  : Mongolia administrative boundaries (sf)
- [`mn_boundary_keys()`](https://temuulene.github.io/mongolstats/reference/mn_boundary_keys.md)
  : Boundary keys/crosswalk helper
- [`mn_boundaries_normalize()`](https://temuulene.github.io/mongolstats/reference/mn_boundaries_normalize.md)
  : Add normalized name columns to boundaries
- [`mn_join_by_name()`](https://temuulene.github.io/mongolstats/reference/mn_join_by_name.md)
  : Join data to boundaries by (normalized) names
- [`mn_fuzzy_join_by_name()`](https://temuulene.github.io/mongolstats/reference/mn_fuzzy_join_by_name.md)
  : Fuzzy join data to boundaries by name

## Utilities

- [`nso_cache_enable()`](https://temuulene.github.io/mongolstats/reference/nso_cache_enable.md)
  : Enable or configure caching
- [`nso_cache_disable()`](https://temuulene.github.io/mongolstats/reference/nso_cache_disable.md)
  : Disable caching
- [`nso_cache_clear()`](https://temuulene.github.io/mongolstats/reference/nso_cache_clear.md)
  : Clear cached entries
- [`nso_cache_status()`](https://temuulene.github.io/mongolstats/reference/nso_cache_status.md)
  : Cache status
- [`nso_period_seq()`](https://temuulene.github.io/mongolstats/reference/nso_period_seq.md)
  : Create period codes
- [`nso_table_periods()`](https://temuulene.github.io/mongolstats/reference/nso_table_periods.md)
  : Get valid periods for a table (PXWeb)
- [`nso_options()`](https://temuulene.github.io/mongolstats/reference/nso_options.md)
  : Set or get mongolstats options
- [`nso_rebuild_px_index()`](https://temuulene.github.io/mongolstats/reference/nso_rebuild_px_index.md)
  : Rebuild PXWeb index and optionally write to a file
- [`nso_offline_enable()`](https://temuulene.github.io/mongolstats/reference/nso_offline_enable.md)
  : Enable offline mode
- [`nso_offline_disable()`](https://temuulene.github.io/mongolstats/reference/nso_offline_disable.md)
  : Disable offline mode

# Articles

### Guides

- [Getting
  Started](https://temuulene.github.io/mongolstats/articles/getting-started.md):
- [Discovering Public Health
  Data](https://temuulene.github.io/mongolstats/articles/discovery.md):
- [Spatial Epidemiology with
  mongolstats](https://temuulene.github.io/mongolstats/articles/mapping.md):
- [Mortality Seasonality in Mongolia: An Evidence-Based
  Analysis](https://temuulene.github.io/mongolstats/articles/mortality-analysis.md):

### Case Studies (Requires API)

- [Environmental Data
  Analysis](https://temuulene.github.io/mongolstats/articles/environmental-surveillance.md):
- [Ulaanbaatar District-Level
  Analysis](https://temuulene.github.io/mongolstats/articles/ub-health-environment.md):
